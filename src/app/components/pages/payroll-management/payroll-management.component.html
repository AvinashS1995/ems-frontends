<div class="menu-configuration-container">
    <div class="header">
        <div class="title">
            <h2>Payroll Management</h2>
        </div>
    </div>

    <mat-divider></mat-divider>

    <mat-expansion-panel>
        <mat-expansion-panel-header>
            <mat-panel-title>
                Filter Menu
            </mat-panel-title>
        </mat-expansion-panel-header>

        <form [formGroup]="employeePayrollFilterForm">
            <div class="filters">

                <mat-form-field appearance="outline">
                    <mat-label>Month</mat-label>
                    <mat-select formControlName="month">
                        <mat-option *ngFor="let month of monthList" [value]="month.value">{{ month.label
                            }}</mat-option>
                    </mat-select>
                </mat-form-field>

                <mat-form-field appearance="outline">
                    <mat-label>Year</mat-label>
                    <mat-select formControlName="year">
                        <mat-option *ngFor="let year of yearList" [value]="year.value">{{ year.label
                            }}</mat-option>
                    </mat-select>
                </mat-form-field>

                <mat-form-field appearance="outline">
                    <mat-label>Employee</mat-label>
                    <mat-select formControlName="empNo">
                        <mat-option *ngFor="let employee of allEmployeeList" [value]="employee.value">{{ employee.label
                            }}</mat-option>
                    </mat-select>
                </mat-form-field>

            </div>
        </form>

        <div class="form-buttons">
            <button mat-flat-button class="example-full-width" (click)="applyFilters()">Apply</button>
            <button mat-flat-button class="example-full-width" (click)="clearFilters()">Clear</button>
        </div>

    </mat-expansion-panel>

    <mat-divider></mat-divider>

    <div class="table-container">
        <table mat-table [dataSource]="employeeMonthlyPayrollList" class="mat-elevation-z1">

            <ng-container matColumnDef="srNo">
                <th mat-header-cell *matHeaderCellDef> Sr No </th>
                <td mat-cell *matCellDef="let element; let i = index">
                    {{ i + 1 }}
                </td>
            </ng-container>

            <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef>Name</th>
                <td mat-cell *matCellDef="let element">
                    <div class="employee-info">
                        <img [src]="element.avatar" [alt]="element.name" matTooltip="{{ element.name }}" />
                        <span class="emp-name">
                            {{ element.name }} [{{ element.employeeId }}]
                        </span>
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="designation">
                <th mat-header-cell *matHeaderCellDef>Designation</th>
                <td mat-cell *matCellDef="let element">{{ element.designation }}</td>
            </ng-container>

            <ng-container matColumnDef="department">
                <th mat-header-cell *matHeaderCellDef>Department</th>
                <td mat-cell *matCellDef="let element">{{ element.department }}</td>
            </ng-container>

            <ng-container matColumnDef="emailedAt">
                <th mat-header-cell *matHeaderCellDef>Emailed At</th>
                <td mat-cell *matCellDef="let element">{{ element.emailedAt | date:'longDate' }}</td>
            </ng-container>

            <ng-container matColumnDef="bankName">
                <th mat-header-cell *matHeaderCellDef>Bank Name</th>
                <td mat-cell *matCellDef="let element">{{ element.bankName }}</td>
            </ng-container>

            <ng-container matColumnDef="bankAccount">
                <th mat-header-cell *matHeaderCellDef>Bank Account</th>
                <td mat-cell *matCellDef="let element">{{ element.bankAccount }}</td>
            </ng-container>

            <ng-container matColumnDef="pan">
                <th mat-header-cell *matHeaderCellDef>PAN</th>
                <td mat-cell *matCellDef="let element">{{ element.pan }}</td>
            </ng-container>

            <ng-container matColumnDef="pfNo">
                <th mat-header-cell *matHeaderCellDef>PF No</th>
                <td mat-cell *matCellDef="let element">{{ element.pfNo }}</td>
            </ng-container>

            <ng-container matColumnDef="netPay">
                <th mat-header-cell *matHeaderCellDef>Net Pay</th>
                <td mat-cell *matCellDef="let element">
                    <button mat-button color="primary" (click)="openPayslip(element.fileUrl, element.fileKey)">â‚¹ {{ element.netPay
                        }}</button>
                </td>
            </ng-container>

            <ng-container>
                <tr class="mat-row" *matNoDataRow>
                    <td class="no-data" [attr.colspan]="displayedColumns.length" style="text-align: center;">
                        <strong>No records found</strong>
                    </td>
                </tr>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
            <tr mat-row *matRowDef="let element; columns: displayedColumns;"></tr>

        </table>
    </div>

    <mat-paginator *ngIf="employeeMonthlyPayrollList.length > 0" [length]="totalRecords" [pageSize]="pageSize"
        [pageSizeOptions]="[5, 10, 25, 100]" (page)="onPageChange($event)"></mat-paginator>

</div>